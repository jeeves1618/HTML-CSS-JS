<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Functions</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link type="text/css" rel="stylesheet" href="css/topic.css" />
  </head>
  <body>
    <header id="main-header">
      <a href="index.html" id="logo">JavaScript</a>
      <nav>
        <ul>
          <li><a href="">Books</a></li>
          <li><a href="">Courses</a></li>
        </ul>
      </nav>
      <a href="#side-drawer" class="menu-btn"
        ><span></span><span></span><span></span
      ></a>
    </header>
    <aside id="side-drawer">
      <header id="sub-header">
        <a href="index.html" id="sublogo">Web Development with HTML and CSS</a>
        <a href="#" class="menu-btn"><span></span><span></span><span></span></a>
      </header>
      <nav>
        <ul>
          <li><a href="">Books</a></li>
          <li><a href="">Courses</a></li>
        </ul>
      </nav>
    </aside>
    <main>
      <h1>Functions</h1>
      <section id="latest-products">
        <ul>
          <li class="topic-item">
            <article>
              <div class="topic-item-content">
                <h2 class="content">New in ES6</h2>
                <p>
                  Default parameters are allowed since ES6.
                  <span class="js-text"
                    >const calcAge = function (birth, now = 2023) {...}</span
                  >
                  can be called with only one argument as in
                  <span class="js-text">calcAge(1990)</span>. Also, note that
                  the default value can be an expression or use the previously
                  defaulted parameter(s).
                </p>
                <ol class="js-text">
                  <li>
                    const calcAge = function (birth, now = 20 * 100) {...}
                  </li>
                  <li>
                    const calcAge = function (birth = 1908, now = birth + 16)
                    {...}
                  </li>
                </ol>
                <p>
                  Only thing is you cannot skip the arguments in the middle when
                  the last argument needs to be overridden. You can pass
                  undefined there.
                </p>
                <ol class="js-text">
                  <li>const func = function (a, b, c=10) {...}</li>
                  <li>func(10,undefined,20);</li>
                </ol>
                <p>You cannot omnit b and pass 10 and 20.</p>
              </div>
            </article>
          </li>
          <li class="topic-item">
            <article>
              <div class="topic-item-content">
                <h2 class="content">First Class Functions</h2>
                <p>
                  Functions are just another type of objects in JavaScript. You
                  can invoke functions on functions. Since, objects are values,
                  functions are also values and can be stored in variables.
                </p>
                <ol class="js-text">
                  <li>const greet = (person) => {</li>
                  <li>console.log("hey " + person);</li>
                  <li>};</li>
                </ol>
                <p>And you can pass this function to another function.</p>
                <ol class="js-text">
                  <li>const greeter = (fn, person) => {</li>
                  <li>fn(person);</li>
                  <li>};</li>
                  <li>greeter(greet, "Universe");</li>
                </ol>
                <p>
                  Here the greet function is passed as an argument to greeter
                  function and, hence, the greet function will become the
                  <strong>callback function</strong> and the greeter function
                  will become the <strong>higher order function</strong>.
                </p>
              </div>
            </article>
          </li>
          <li class="topic-item">
            <article>
              <div class="topic-item-content">
                <h2 class="content">Returning Functions</h2>
                <p>You can return a function like this.</p>
                <ol class="js-text">
                  <li>const fun = function (greet) {</li>
                  <li>&nbsp;return function (name) {</li>
                  <li>&nbsp;console.log(`${greet} ${name}`);</li>
                  <li>&nbsp;};</li>
                  <li>};</li>
                  <li></li>
                  <li>const greeter = fun("Hello");</li>
                  <li>greeter("World");</li>
                </ol>
                <p>This will print Hello World</p>

                <p>
                  The awkward looking
                  <span class="js-text">fun("Hello")("Universe");</span> will
                  also work. Remember fun("Hello") will return a function name
                  and we are executing that function by passing a parameter
                  through ("Universe").
                </p>
              </div>
            </article>
          </li>
          <li class="topic-item">
            <article>
              <div class="topic-item-content">
                <h2 class="content">Methods</h2>
                <p>
                  Functions defined within an object, like trip, are methods.
                </p>
                <ol class="js-text">
                  <li>const myYacht = {</li>
                  <li>&nbsp;model: "Sunseeker 95",</li>
                  <li>&nbsp;trips: [],</li>
                  <li>&nbsp;const trip(rangeInNM, fuelInL) {</li>
                  <li>&nbsp;&nbsp;let tripAdvice = `${this.model} sailed ${</li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;rangeInNM * 1.852</li>
                  <li>
                    &nbsp;&nbsp;} Kilometers, consuming ${fuelInL} liters of
                    Disel and providing a mileage of ${
                  </li>
                  <li>&nbsp;&nbsp;&nbsp;&nbsp;(rangeInNM * 1.852) / fuelInL</li>
                  <li>&nbsp;&nbsp;} KMPL`;</li>
                  <li>&nbsp;&nbsp;this.trips.push(tripAdvice);</li>
                  <li>&nbsp;&nbsp;return tripAdvice;</li>
                  <li>&nbsp;},</li>
                  <li>};</li>
                  <li></li>
                  <li>console.log(myYacht.trip(1400, 12000));</li>
                </ol>
              </div>
            </article>
          </li>
          <li class="topic-item">
            <article>
              <div class="topic-item-content">
                <h2 class="content">Call and Apply</h2>
                <p>
                  Now, I add one more yacht to my collection. I don't want to
                  rewrite the entire object again.
                </p>
                <ol class="js-text">
                  <li>const myNewYacht = {</li>
                  <li>&nbsp;model: "Sunseeker 116",</li>
                  <li>&nbsp;trips: [],</li>
                  <li>};</li>
                </ol>
                <p>
                  So, I create another object for my new yacht with place holder
                  for storing the yacht specific details. I want to reuse the
                  method defined within myYacht.
                </p>

                <p>
                  If I just invoke the function
                  <span class="js-text">console.log(trip(1600, 14450));</span>
                  it will give me this error 'ReferenceError: trip is not
                  defined'. So, we get the reference to the method from myYacht
                  object using
                  <span class="js-text">const trip = myYacht.trip;</span>. Then
                  we invoke it by passing the new object and aruguments to the
                  call function. This will point the this operator in the trip
                  method to point to the myNewYacht object.<span class="js-text"
                    >console.log(trip.call(myNewYacht, 1600, 14450));</span
                  >
                  You can also use apply instead of call, if you pack the
                  arguments into an array.
                </p>
                <ol class="js-text">
                  <li>const spec = [1600, 14450];</li>
                  <li>console.log(trip.apply(myNewYacht, spec));</li>

                  <li>};</li>
                </ol>
                <p>
                  Also, once you have got the reference of the method once, you
                  can use that same reference variable for multiple objects.
                </p>
              </div>
            </article>
          </li>
          <li class="topic-item">
            <article>
              <div class="topic-item-content">
                <h2 class="content">Binding a Method</h2>
                <p>
                  Call and Apply invoke the method right away with the object
                  passed as the parameter. But, bind will pass a function
                  reference that you can use later to invoke the function.
                </p>
                <ol class="js-text">
                  <li>const yacht095 = trip.bind(myYacht);</li>
                  <li>const yacht116 = trip.bind(myNewYacht);</li>
                  <li>const yacht131 = trip.bind(mySuperYacht);</li>
                  <li>console.log(yacht095(2000, 10000));</li>
                  <li>console.log(yacht116(2000, 12000));</li>
                  <li>console.log(yacht131(2000, 14000));</li>
                </ol>
                <p>
                  Well, the first parameter that I pass is always 2000. Yes, we
                  don't have to repeat that, we can bind the object with the
                  first parameter as 2000.
                </p>
                <ol class="js-text">
                  <li>const yacht095 = trip.bind(myYacht, 2000);</li>
                  <li>const yacht116 = trip.bind(myNewYacht, 2000);</li>
                  <li>const yacht131 = trip.bind(mySuperYacht, 2000);</li>
                  <li>console.log(yacht095(10000));</li>
                  <li>console.log(yacht116(12000));</li>
                  <li>console.log(yacht131(14000));</li>
                </ol>
                <p>
                  This way of predefining part of the arguments to a function is
                  called partial application.
                </p>
                <p>
                  Bind method has one more very practical application. It is
                  related to where the 'this' operator points to, when a
                  function gets invoked on a click event from the DOM.
                </p>
              </div>
            </article>
          </li>
          <li class="topic-item">
            <article>
              <div class="topic-item-content">
                <h2 class="content">Binding DOM</h2>
                <p>
                  Let me add a new property and a method to the myYacht object.
                </p>
                <ol class="js-text">
                  <li>myYacht.count = 1;</li>
                  <li>myYacht.buyNewYacht = function () {</li>
                  <li>&nbsp;&nbsp;this.count++;</li>
                  <li>&nbsp;&nbsp;console.log(this.count);</li>
                  <li>};</li>
                  <li>
                    document.querySelector(".button").addEventListener('click',myYacht.buyNewYacht)
                  </li>
                </ol>
                <p>
                  The above call back from addEventListener will not work.
                  Because, the 'this' operator inside the buyNewYacht method
                  will not point to myYacht object when the function is invoked
                  from DOM. Instead, 'this' will point to DOM object and there
                  will not be a count variable defined there.
                </p>
                <p>
                  So, we have to force 'this' to point to myYacht object. We
                  cannot use call or apply since they will execute the function
                  right away. We do not want to execute the callback right away.
                  We will use the bind method instead.
                </p>
                <ol class="js-text">
                  <li>
                    document.querySelector (".button").addEventListener('click',
                    myYacht.buyNewYacht.bind(myYacht));
                  </li>
                </ol>
              </div>
            </article>
          </li>
        </ul>
      </section>
    </main>

    <footer></footer>
  </body>
</html>
